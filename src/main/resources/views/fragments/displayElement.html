<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <link th:href="@{/css/styles.css}" rel="stylesheet">
        <meta charset="UTF-8" />
    </head>
    <body>
        <div th:fragment="center">

            
            <div th:if="${totalPages} > 1">
                <!-- List of comics -->
                <div th:each="comic : ${comics}">
                    <a th:text="${comic.toString()}" th:href="@{'/comic/' + ${comic.getId()}}"></a>
                </div>

                <!-- Total of elements -->
                <div> 
                        Total Rows : [[${totalElements}]]
                </div>

                <!-- Page navigation -->
                <nav>
                    <li th:class="${currentPage > 1 ? 'page-item' : 'page-item_disabled'} ">
                        <a th:href="@{'/' + ${1}}">Début</a>
                    </li>

                    <li th:class="${currentPage > 1 ? 'page-item' : 'page-item_disabled'} ">
                        <a th:href="@{'/' + ${currentPage - 1}}">Précédent</a>
                    </li>


                    <th:block th:if="${totalPages <= numberDisplayPage}">
                        <li th:each="i: ${#numbers.sequence(1, totalPages)}" 
                            th:class="${currentPage != i ? 'page-item' : 'page-item_disabled'} ">
                            <a th:href="@{'/' + ${i}}">[[${i}]]</a>
                        </li>
                    </th:block>

                    <th:block th:if="${totalPages > numberDisplayPage}">

                        <th:block th:if="${currentPage <= numberDisplayPage / 2 || currentPage > (totalPages - numberDisplayPage / 2 ) - 1}">
                            <li th:each="i: ${#numbers.sequence(1, numberDisplayPage / 2)}" 
                                th:class="${currentPage != i ? 'page-item' : 'page-item_disabled'} ">
                                <a th:href="@{'/' + ${i}}">[[${i}]]</a>
                            </li>

                            <a th:href="@{'/' + ${(numberDisplayPage /2) +1}}">...</a>

                            <li th:each="i: ${#numbers.sequence(totalPages - ((numberDisplayPage / 2 ) - 1), totalPages)}" 
                            th:class="${currentPage != i ? 'page-item' : 'page-item_disabled'} ">
                            <a th:href="@{'/' + ${i}}">[[${i}]]</a>
                            </li>
                        </th:block>

                        <th:block th:if="${currentPage > numberDisplayPage / 2 && currentPage < (totalPages - numberDisplayPage / 2 )}">

                            <th:block th:if="${(currentPage - ((numberDisplayPage /2) +1)) > 0 }">
                                <a th:href="@{'/' + ${(currentPage - ((numberDisplayPage /2) +1))}}">...</a>
                            </th:block>

                            <li th:each="i: ${#numbers.sequence(currentPage - (numberDisplayPage / 2), currentPage + (numberDisplayPage / 2))}" 
                                th:class="${currentPage != i ? 'page-item' : 'page-item_disabled'} ">
                                <a th:href="@{'/' + ${i}}">[[${i}]]</a>
                            </li>

                            <a th:href="@{'/' + ${(currentPage + ((numberDisplayPage /2) +1))}}">...</a>

                        </th:block>
                    </th:block>

                    <li th:class="${currentPage < totalPages ? 'page-item' : 'page-item_disabled'} ">
                        <a th:href="@{'/' + ${currentPage + 1}}">Suivant</a>
                    </li>

                    <li th:class="${currentPage < totalPages  ? 'page-item' : 'page-item_disabled'} ">
                        <a th:href="@{'/' + ${totalPages}}">Fin</a>
                    </li>
                </nav>

                    <!-- Le comportement de cette section est étrange pour Premier et Précédent, commenté et non supprimé aux cas ou
                    <div>
                        <a th:if="${currentPage != 1}" th:href="@{'/' + ${1}}">Premier</a>
                        <span th:unless="${currentPage != 1}"></span>Premier</span>
                    </div>

                    <div>
                        <a th:if="${currentPage != 1}" th:href="@{'/' + ${currentPage - 1}}">Précédent</a>
                        <span th:unless="${currentPage != 1}"></span>Précédent</span>
                    </div>
                    <div>
                        <span th:each="i: ${#numbers.sequence(1, totalPages)}">
                            <a th:if="${currentPage != i}" th:href="@{'/' + ${i}}">[[${i}]]</a>
                            <span th:unless="${currentPage != i}">[[${i}]]</span> 
                            &nbsp; &nbsp;
                        </span>
                    </div>

                    <div>
                        <a th:if="${currentPage < totalPages}" th:href="@{'/' + ${currentPage + 1}}">Suivant</a>
                        <span th:unless="${currentPage < totalPages}">Suivant</span>
                    </div>

                    <div>
                        <a th:if="${currentPage < totalPages}" th:href="@{'/' + ${totalPages}}">Fin</a>
                        <span th:unless="${currentPage < totalPages}">Fin</span>
                    </div>
                    -->
            </div>

        </div>
    </body>
</html>